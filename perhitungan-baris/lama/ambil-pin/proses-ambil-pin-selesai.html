<?php
$nama = $datadiri->smp_nama_siswa; $smp_uasbn = $datadiri->smp_uasbn;
$jumlah_rapor = $is_aksel ? 3 : 5; if ($smp_alur <= 3) { $kota =
$kk->smp_nama_kotakab_kk; $kecamatan = $kk->smp_nama_kecamatan_kk; $kelurahan =
$kk->smp_kelurahan; $nik = $kk->smp_nik; $no_kk = $kk->smp_nomor_kk; $alamat =
$kk->smp_alamat_siswa; $rt_rw = $kk->smp_rt_rw; } else { $kota =
$kk->smp_nama_kotakab_domisili; $kecamatan = $kk->smp_nama_kecamatan_domisili;
$kelurahan = $kk->smp_kelurahan_domisili; $nik = $kk->smp_nik; $no_kk = "-";
$alamat = $kk->smp_alamat_siswa; $rt_rw = $kk->smp_rt_rw_domisili; } ?>
<div class="row font">
  <h2 class="font-tebel text-center">
    <span style="color: #ff0006">Latihan </span>
    Pengambilan PIN PPDB <br />Jawa Timur 2022
  </h2>
  <hr />
  <div class="col-md-12 col-md-border">
    <div class="panel panel-default card-1">
      <div class="panel-heading panel-heading-custom text-center">
        <h3
          class="tulisan-tebel font-putih"
          style="font-size: 25pt"
        >
          Proses Pengambilan PIN Selesai
        </h3>
      </div>
      <div
        class="panel-body"
        style="padding: 20px 30px"
      >
        <div class="text-center">
          <h1 class="font-tebel"><b>Selamat!</b></h1>
          <h4 class="">Pengambilan PIN telah berhasil dilaksanakan</h4>
        </div>
        <div class="alert alert-info text-center">
          <h4 class="font-agak-tebel">
            Silahkan simpan PIN ini untuk digunakan saat mendaftar
          </h4>
          <h4 class="font-reguler">
            Untuk melihat PIN kembali, Anda dapat menggunakan menu
            <a
              href="<?= base_url().lihat_pin ?>"
              target="blank"
              rel="noopener noreferrer"
              ><b>Lihat PIN</b></a
            >
            pada bagian Pra Pendaftaran
          </h4>
        </div>
        <h4 class="font-hijau"><strong>Data Diri</strong></h4>
        <div class="form-group">
          <label class="font-tipis">Nama</label>
          <div class="bottom_border">
            <span class="font-agak-tebel"><?= $nama ?></span>
          </div>
        </div>
        <div class="form-group">
          <label class="font-tipis">NISN</label>
          <div class="bottom_border">
            <span class="font-agak-tebel"><?= $smp_uasbn ?></span>
          </div>
        </div>
        <div class="alert text-center">
          <h4 class="font-tebel">PIN</h4>
          <h2>
            <b><?=$pin?></b>
          </h2>
        </div>
        <hr />
        <h4 class="font-hijau"><strong>Data Rapor</strong></h4>
        <div class="table-responsive">
          <table class="table table-hover table-bordered">
            <thead style="background-color: #0090a2; color: white">
              <tr>
                <th style="text-align: center">Semester</th>
                <th style="text-align: center">Pendidikan Agama</th>
                <th style="text-align: center">PPKn</th>
                <th style="text-align: center">Bahasa Indonesia</th>
                <th style="text-align: center">Matematika</th>
                <th style="text-align: center">IPA</th>
                <th style="text-align: center">IPS</th>
                <th style="text-align: center">Bahasa Inggris</th>
              </tr>
            </thead>
            <tbody
              class="font-agak-tebel"
              style="text-align: center"
            >
              <?php for ($i = 0; $i < $jumlah_rapor; $i++) { ?>
              <tr>
                <td><?= $rapor[$i]->semester ?></td>
                <td><?= $rapor[$i]->pa ?></td>
                <td><?= $rapor[$i]->kwn ?></td>
                <td><?= $rapor[$i]->ind ?></td>
                <td><?= $rapor[$i]->mat ?></td>
                <td><?= $rapor[$i]->ipa ?></td>
                <td><?= $rapor[$i]->ips ?></td>
                <td><?= $rapor[$i]->ing ?></td>
              </tr>
              <?php } ?>
            </tbody>
          </table>
        </div>
        <p
          class="font-tipis"
          style="color: red"
        >
          Jika masih ada kesalahan nilai rapor, dapat datang langsung ke kantor
          layanan Cabang Dinas Pendidikan terdekat.
        </p>
        <br />
        <h4 class="font-hijau"><strong>Data Alamat</strong></h4>
        <div class="form-group">
          <label class="font-tipis">Kabupaten/Kota</label>
          <div class="bottom_border">
            <span class="font-agak-tebel"><?= $kota ?></span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label class="font-tipis">Kecamatan</label>
              <div class="bottom_border">
                <span class="font-agak-tebel"><?= $kecamatan ?></span>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label class="font-tipis">Desa/Kelurahan</label>
              <div class="bottom_border">
                <span class="font-agak-tebel"><?= $kelurahan ?></span>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label class="font-tipis">RT/RW</label>
              <div class="bottom_border">
                <span class="font-agak-tebel"><?= $rt_rw ?></span>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label class="font-tipis">NIK</label>
              <div class="bottom_border">
                <span class="font-agak-tebel"><?= $nik ?></span>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label class="font-tipis">No KK</label>
              <div class="bottom_border">
                <span class="font-agak-tebel"><?= $no_kk ?></span>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="font-tipis">Alamat</label>
          <div class="bottom_border">
            <span class="font-agak-tebel"><?= $alamat ?></span>
          </div>
        </div>
        <div
          class="map-container"
          style="position: relative"
        >
          <div
            class="map"
            id="map"
          ></div>
          <div
            class="center"
            id="map-marker"
          >
            <img
              class="img-no-drag"
              src="<?= URL_STATIC ?>img/marker.png"
              alt=""
            />
          </div>
        </div>
        <hr />
        <h4 class="font-hijau"><strong>Sekolah Terdekat</strong></h4>
        <div class="row">
          <div class="col-md-6">
            <p class="font-agak-tebel">SMA</p>
            <ol
              type="1"
              class="nice-ol"
            >
              <?php for (
                                $i = 0;
                                $i < 5;
                                $i++
                            ) { ?>
              <?php if(isset($rekomendasi_sma[$i]->nama_sekolah) and
              $rekomendasi_sma[$i]->nama_sekolah != 'NULL') { ?>
              <li>
                <?=$rekomendasi_sma[$i]->nama_sekolah?> (<?=$rekomendasi_sma[$i]->jarak_sekolah?>
                Meter)
              </li>
              <?php } ?>
              <?php } ?>
            </ol>
            <?php if(isset($rekomendasi_sma[0]->nama_sekolah) and
            $rekomendasi_sma[0]->nama_sekolah == 'NULL') { ?>
            <p>Belum ada rekomendasi sekolah</p>
            <?php } ?>
          </div>
          <div class="col-md-6">
            <p class="font-agak-tebel">SMK</p>
            <ol
              type="1"
              class="nice-ol"
            >
              <?php for (
                                $i = 0;
                                $i < 5;
                                $i++
                            ) { ?>
              <?php if(isset($rekomendasi_smk[$i]->nama_sekolah) and
              $rekomendasi_smk[$i]->nama_sekolah != 'NULL') { ?>
              <li>
                <?=$rekomendasi_smk[$i]->nama_sekolah?> (<?=$rekomendasi_smk[$i]->jarak_sekolah?>
                Meter)
              </li>
              <?php } ?>
              <?php } ?>
            </ol>
            <?php if(isset($rekomendasi_smk[0]->nama_sekolah) and
            $rekomendasi_smk[0]->nama_sekolah == 'NULL') { ?>
            <p>Belum ada rekomendasi sekolah</p>
            <?php } ?>
          </div>
        </div>
      </div>
      <div class="panel-footer text-center">
        <a
          href="<?php echo base_url(); ?>"
          class="btn btn-primary font-putih"
          >Kembali Ke Beranda</a
        >
        <span class="clearfix"></span>
      </div>
    </div>
  </div>
</div>

<script>
  const mouseWheel = new ol.interaction.MouseWheelZoom({useAnchor:false});

  const interactions = ol.interaction.defaults({
      altShiftDragRotate: false,
      shiftDragZoom: false,
      pinchRotate: false,
      mouseWheelZoom: true,
      pinchZoom: true,
      dragPan:false,
  }).extend([mouseWheel]);

  //# BUILD MAP #
  const source = new ol.source.OSM();
  const layer = new ol.layer.Tile({
          source: source
      });
      const overviewMapControl = new ol.control.OverviewMap({
      layers: [layer ],
  });

  const view = new ol.View({
          center: ol.proj.fromLonLat([
            <?= $kk->smp_longitude_operator ?>, <?= $kk->smp_latitude_operator ?>
          ]),
          zoom: 19,
          minZoom: 10,
          maxZoom: 19,
      });

  const map = new ol.Map({
      controls: ol.control.defaults().extend([overviewMapControl]),
      interactions: interactions,
      layers: [
          layer
      ],
      target: 'map',
      view: view
  });

  map.interactions = interactions;
  map.updateSize()

  $('#map').css('height', '400px');
  //# END of BUILD MAP #
</script>
